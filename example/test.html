<!DOCTYPE html>
<html>
    <head>
        <title>Train simulator</title>
        <script type="text/javascript" src="../src/trainsimulator.js"></script>
        <script type="text/javascript" src="../src/trainsimulatorui.js"></script>
        <style>
.track {border-style:solid; border-color:#888; border-width: 1px 0; position:relative; height:10px; margin:20px;}
.joint {position: absolute; background-color:#f00; height:10px; width:1px;}
.switch {position: absolute; background-color:#f88; height:10px; width:1px;}
.train-tail {position: absolute; background-color:#0f0; height:10px; width:1px;}
.train-head {position: absolute; background-color:#00f; height:10px; width:1px;}
        </style>
    </head>
    <body>
        <h1>Train simulator TEST</h1>
        <div id="graph">
            <div class="track" id="track-0">
                <div class="joint" id="joint-0-1"></div>
                <div class="joint" id="joint-1-1"></div>
                <div class="switch" id="switch-0-1"></div>
                <div class="switch" id="switch-0-2"></div>
                <div class="train-tail" id="train-0-tail"></div>
                <div class="train-head" id="train-0-head"></div>
            </div>
            <div class="track" id="track-1">
                <div class="joint" id="joint-0-2"></div>
                <div class="joint" id="joint-1-2"></div>
                <div class="switch" id="switch-1-1"></div>
                <div class="switch" id="switch-1-2"></div>
            </div>
            <div class="track" id="track-2">
                <div class="switch" id="switch-0-3"></div>
                <div class="switch" id="switch-1-3"></div>
            </div>
        </div>
        <script type="text/javascript">
var tsui = new TrainSimulatorUi();

var track1 = tsui.newTrack();
var track2 = tsui.newTrack();
var track3 = tsui.newTrack();

var joint1 = tsui.newJoint();
joint1.connectTrack(1, track1, 100, 1);
joint1.connectTrack(2, track2, 100, 1);

var joint2 = tsui.newJoint();
joint2.connectTrack(1, track1, 0, -1);
joint2.connectTrack(2, track2, 0, -1);

var switch1 = tsui.newSwitch();
switch1.connectTrack(1, track1, 80, 1);
switch1.connectTrack(2, track1, 81, -1);
switch1.connectTrack(3, track3, 0, -1);

var switch2 = tsui.newSwitch();
switch2.connectTrack(1, track2, 81, -1);
switch2.connectTrack(2, track2, 80, 1);
switch2.connectTrack(3, track3, 50, 1);

var train = tsui.newTrain(20);
train.putOnTrack(track1, 55, 1);

tsui.trainSimulator.sortElements();
tsui.drawTracks();
tsui.drawJoints();
tsui.drawSwitches();
tsui.drawTrains();
tsui.trainSimulator.sortElements();

move = function() {
    train.move(1);
    tsui.trainSimulator.sortElements();
    tsui.drawTrains();
};

        </script>
        <button type="button" onclick="move()">Move !!</button>
        <button type="button" onclick="switch1.toggle()">Switch 1</button>
    </body>
</html>

